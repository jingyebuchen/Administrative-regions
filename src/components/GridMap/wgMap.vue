<template>
  <div class="grid_map" id="map">
    <div id="mouse-position"></div>
    <div id="popup" class="ol-popup">
      <div id="popup-content"></div>
    </div>
    <div class="unit">边长:</div>
    <div class="dropdown">
      <el-select v-model="value" placeholder="5000m" size='small' @change="ddchage(value)">
        <el-option
          v-for="item in options"
          :key="item.value"
          :label="item.label"
          :value="item.value">
        </el-option>
      </el-select>      
    </div>
  </div>
</template>

<script>
  import CommonFunc from './js/calclonlat'
  import Map from 'ol/Map.js';
  import View from 'ol/View.js';
  import TileLayer from 'ol/layer/Tile.js';
  import TileWMS from 'ol/source/TileWMS.js';
  import XYZSource from 'ol/source/XYZ';
  import Graticule from 'ol/Graticule.js';
  import {
    defaults as defaultControls,
    ScaleLine,
    FullScreen,
    MousePosition
  } from 'ol/control.js';
  import {
    createStringXY
  } from 'ol/coordinate.js';
  import {
    fromLonLat,
    transform,
    toLonLat
  } from 'ol/proj';
  import {
    Circle as CircleStyle,
    Fill,
    Stroke,
    Icon,
    Style
  } from 'ol/style.js';
  import {
    Vector as VectorLayer
  } from 'ol/layer.js';
  import {
    OSM,
    Vector as VectorSource
  } from 'ol/source.js';
  import Feature from 'ol/Feature.js';
  import Point from 'ol/geom/Point.js';
  import {
    LineString,
    Polygon
  } from 'ol/geom.js';
  import {
    getDistance
  } from 'ol/sphere.js';
  import Draw, {
    createRegularPolygon,
    createBox
  } from 'ol/interaction/Draw.js';
  import {
    defaults as defaultInteractions,
    Select,
    Translate
  } from 'ol/interaction.js';
  import {
    click,
    pointerMove,
    altKeyOnly
  } from 'ol/events/condition.js';
  import GeoJSON from 'ol/format/GeoJSON';
  import EsriJSON from 'ol/format/EsriJSON';
  import * as turf from '@turf/turf';
  import Overlay from 'ol/Overlay.js';

  let map;
  let featuregrid = [];
  let geojson = [];
  var layer='';

  export default {
    name: 'GridMap',
    data() {
      return {
        options: [{
          value: '4000',
          label: '4000m'
        }, {
          value: '5000',
          label: '5000m'
        }, {
          value: '100000',
          label: '100000m'
        }],
        value: '',
        unit:5000
      }
    },
    mounted() {
      let _this = this;
      _this.initMap();
    },
    methods: {
      ddchage(value){
        this.unit=value;
        this.$options.methods.addlayer(this.unit);
      },
      initMap() {
        let _this = this;
        function createStyle(src, img) {
          return new Style({
            image: new Icon( /** @type {module:ol/style/Icon~Options} */ ({
              anchor: [0.5, 0.5],
              crossOrigin: 'anonymous',
              src: src,
              img: img,
              scale: 0.1,
              imgSize: img ? [img.width, img.height] : undefined
            }))
          });
        }
        var mousePositionControl = new MousePosition({
          coordinateFormat: createStringXY(4), //坐标格式
          projection: 'EPSG:4326', //地图投影坐标系
          className: 'custom-mouse-position', //坐标信息显示样式
          // 显示鼠标位置信息的目标容器
          target: document.getElementById('mouse-position'),
          undefinedHTML: '&nbsp' //未定义坐标的标记
        });
        var point00 = [114.30, 30.60];
        var end11 = [114.90, 30.30];
        //======================================网格============================
        var onlystyle = new Style({
          stroke: new Stroke({
            color: '#0000ff',
            width: 1
          }),
          fill: new Fill({
            color: 'rgba(0,255,255,0.4)'
          })
        })
        var langfang_beisan = [117.18038, 40.08293, 117.17907, 40.08370, 117.17851, 40.08348, 117.17893, 40.08256,
          117.17889, 40.08234, 117.17758, 40.08121, 117.17651, 40.07980, 117.17570, 40.07974, 117.17523, 40.07920,
          117.17508, 40.07878, 117.17548, 40.07793, 117.17584, 40.07755, 117.17852, 40.07615, 117.17946, 40.07549,
          117.17997, 40.07489, 117.18000, 40.07455, 117.17991, 40.07414, 117.17947, 40.07379, 117.17773, 40.07345,
          117.17748, 40.07326, 117.17714, 40.07076, 117.17379, 40.06818, 117.17399, 40.06927, 117.17380, 40.06950,
          117.17165, 40.06980, 117.17092, 40.07046, 117.17066, 40.07040, 117.17031, 40.06984, 117.16912, 40.07032,
          117.16893, 40.07080, 117.16920, 40.07150, 117.16907, 40.07176, 117.16864, 40.07171, 117.16793, 40.07200,
          117.16756, 40.07149, 117.16710, 40.07135, 117.16639, 40.07187, 117.16565, 40.07288, 117.16479, 40.07272,
          117.16263, 40.07325, 117.16110, 40.07384, 117.15852, 40.07533, 117.15810, 40.07531, 117.15788, 40.07463,
          117.15766, 40.07450, 117.15478, 40.07500, 117.15425, 40.07519, 117.15179, 40.07675, 117.14988, 40.07730,
          117.14967, 40.07712, 117.15000, 40.07679, 117.15197, 40.07608, 117.15293, 40.07551, 117.15332, 40.07517,
          117.15368, 40.07443, 117.15179, 40.07052, 117.14975, 40.06797, 117.14867, 40.06736, 117.14735, 40.06724,
          117.14502, 40.06672, 117.14116, 40.06491, 117.13883, 40.06461, 117.13621, 40.06461, 117.13362, 40.06298,
          117.13269, 40.06266, 117.12984, 40.06288, 117.12832, 40.06260, 117.12192, 40.06417, 117.12069, 40.06519,
          117.11993, 40.06670, 117.11931, 40.06739, 117.11879, 40.06777, 117.11652, 40.06875, 117.11296, 40.07101,
          117.11215, 40.07097, 117.11142, 40.07029, 117.11117, 40.06973, 117.11088, 40.06952, 117.11038, 40.06962,
          117.10963, 40.07028, 117.10817, 40.07090, 117.10489, 40.07074, 117.10371, 40.07050, 117.10198, 40.07039,
          117.10041, 40.07051, 117.09822, 40.07143, 117.09745, 40.07195, 117.09891, 40.07314, 117.09876, 40.07334,
          117.09816, 40.07287, 117.09636, 40.07206, 117.09581, 40.07145, 117.09560, 40.07142, 117.09567, 40.07176,
          117.09737, 40.07416, 117.09468, 40.07485, 117.09435, 40.07443, 117.09174, 40.07468, 117.09090, 40.07341,
          117.07907, 40.07370, 117.07868, 40.06726, 117.07665, 40.06715, 117.07669, 40.06406, 117.07644, 40.06405,
          117.07635, 40.06376, 117.07445, 40.06367, 117.07452, 40.06739, 117.06768, 40.06662, 117.06756, 40.06683,
          117.06518, 40.06652, 117.06313, 40.06615, 117.06412, 40.06277, 117.05788, 40.06138, 117.05776, 40.06123,
          117.05815, 40.06031, 117.05713, 40.06019, 117.05611, 40.06031, 117.05575, 40.06049, 117.05470, 40.05870,
          117.05140, 40.05922, 117.04895, 40.05936, 117.04879, 40.05915, 117.04884, 40.05781, 117.04690, 40.05823,
          117.04552, 40.05836, 117.04625, 40.05348, 117.04632, 40.05336, 117.04729, 40.05334, 117.04728, 40.05223,
          117.04711, 40.05165, 117.04469, 40.05097, 117.04494, 40.04972, 117.03828, 40.04902, 117.03693, 40.04979,
          117.03620, 40.04936, 117.03222, 40.04802, 117.03170, 40.04753, 117.02912, 40.04343, 117.02676, 40.04102,
          117.02068, 40.03751, 117.02214, 40.03264, 117.01746, 40.03241, 117.01859, 40.02888, 117.01542, 40.02833,
          117.01456, 40.03115, 117.01166, 40.03048, 117.01174, 40.02918, 117.01124, 40.02920, 117.00829, 40.02948,
          117.00789, 40.03158, 117.00777, 40.03160, 117.00482, 40.03130, 117.00501, 40.02995, 117.00137, 40.02966,
          117.00122, 40.02926, 116.99387, 40.02862, 116.99390, 40.03101, 116.99076, 40.03242, 116.98876, 40.03399,
          116.98660, 40.03524, 116.98001, 40.03758, 116.97403, 40.03742, 116.97220, 40.03722, 116.96591, 40.03581,
          116.96504, 40.03487, 116.96418, 40.03552, 116.96318, 40.03662, 116.96273, 40.03753, 116.96449, 40.03870,
          116.96374, 40.04204, 116.96627, 40.04258, 116.96629, 40.04336, 116.96474, 40.04321, 116.96318, 40.04744,
          116.95881, 40.04670, 116.95819, 40.04969, 116.95590, 40.04966, 116.95585, 40.05023, 116.95443, 40.04998,
          116.94460, 40.04341, 116.94442, 40.04358, 116.93925, 40.04032, 116.93898, 40.04755, 116.93839, 40.04754,
          116.93846, 40.04323, 116.93754, 40.04298, 116.93716, 40.04747, 116.93554, 40.04758, 116.93525, 40.04694,
          116.93449, 40.04609, 116.93325, 40.04502, 116.93284, 40.04491, 116.93189, 40.04545, 116.93163, 40.04583,
          116.93266, 40.04718, 116.93025, 40.04726, 116.93023, 40.04822, 116.93293, 40.04824, 116.93281, 40.04980,
          116.93001, 40.04964, 116.92972, 40.04975, 116.92948, 40.05033, 116.92905, 40.05033, 116.92867, 40.05131,
          116.92667, 40.05095, 116.92661, 40.05109, 116.92571, 40.05095, 116.92443, 40.05426, 116.92212, 40.05386,
          116.92291, 40.05012, 116.92208, 40.05010, 116.92156, 40.05202, 116.92059, 40.05193, 116.92090, 40.05035,
          116.91944, 40.05036, 116.91943, 40.04900, 116.91896, 40.04897, 116.91901, 40.04756, 116.91819, 40.04698,
          116.91819, 40.04641, 116.91331, 40.04510, 116.91330, 40.04411, 116.91202, 40.04365, 116.91099, 40.04653,
          116.91094, 40.04782, 116.90945, 40.04706, 116.90828, 40.05154, 116.90386, 40.05144, 116.90274, 40.05116,
          116.90254, 40.05179, 116.90212, 40.05175, 116.90226, 40.05100, 116.90048, 40.05038, 116.89928, 40.04926,
          116.89799, 40.04866, 116.89542, 40.04667, 116.89563, 40.04638, 116.89377, 40.04636, 116.88644, 40.04532,
          116.88647, 40.04449, 116.88595, 40.04357, 116.88565, 40.04413, 116.88432, 40.04492, 116.88140, 40.04491,
          116.87701, 40.04455, 116.87568, 40.04477, 116.87480, 40.04511, 116.87276, 40.04340, 116.86912, 40.04113,
          116.86766, 40.04045, 116.86473, 40.03998, 116.86469, 40.04068, 116.86187, 40.04079, 116.85496, 40.04828,
          116.85195, 40.04841, 116.85010, 40.04899, 116.85184, 40.05080, 116.84699, 40.05288, 116.84422, 40.05387,
          116.84351, 40.05083, 116.84103, 40.05082, 116.83442, 40.05033, 116.82548, 40.05007, 116.82571, 40.04735,
          116.82474, 40.04696, 116.82456, 40.04711, 116.82269, 40.04687, 116.82271, 40.04628, 116.81671, 40.04532,
          116.81718, 40.04119, 116.81713, 40.03869, 116.81429, 40.03856, 116.81429, 40.03825, 116.81469, 40.03798,
          116.81479, 40.03763, 116.81469, 40.03143, 116.81512, 40.03141, 116.81507, 40.02971, 116.81578, 40.02963,
          116.81571, 40.02880, 116.81394, 40.02916, 116.81396, 40.02719, 116.80916, 40.02749, 116.80926, 40.02975,
          116.80593, 40.03005, 116.80603, 40.03098, 116.80568, 40.03114, 116.80472, 40.02984, 116.79731, 40.03097,
          116.79564, 40.02862, 116.79492, 40.02880, 116.79419, 40.02766, 116.78345, 40.03111, 116.78414, 40.03328,
          116.78238, 40.03338, 116.78017, 40.03382, 116.77974, 40.03370, 116.77680, 40.03380, 116.77545, 40.03360,
          116.77388, 40.03277, 116.77171, 40.03123, 116.77138, 40.02599, 116.76933, 40.02512, 116.76998, 40.02454,
          116.77018, 40.02407, 116.76955, 40.02046, 116.76847, 40.01816, 116.76768, 40.01590, 116.76483, 40.01200,
          116.76437, 40.01041, 116.76495, 40.00850, 116.76565, 40.00717, 116.76822, 40.00409, 116.76966, 40.00172,
          116.77005, 39.99646, 116.76927, 39.99154, 116.76440, 39.98602, 116.76236, 39.98350, 116.76066, 39.98105,
          116.76034, 39.97513, 116.75774, 39.97157, 116.75690, 39.97072, 116.75484, 39.96971, 116.75352, 39.96870,
          116.75203, 39.96691, 116.75127, 39.96476, 116.75111, 39.96206, 116.75124, 39.96025, 116.75238, 39.95821,
          116.75673, 39.95479, 116.76320, 39.95218, 116.76769, 39.95135, 116.77077, 39.94995, 116.77450, 39.94851,
          116.77649, 39.94635, 116.77690, 39.94229, 116.77724, 39.93483, 116.77716, 39.93307, 116.77670, 39.93180,
          116.77629, 39.92707, 116.77671, 39.91798, 116.77663, 39.91370, 116.77609, 39.90921, 116.77762, 39.90425,
          116.77816, 39.90102, 116.77819, 39.89556, 116.77863, 39.89022, 116.77930, 39.88833, 116.78101, 39.88563,
          116.78248, 39.88448, 116.78739, 39.88157, 116.78781, 39.88085, 116.78869, 39.88006, 116.79022, 39.87934,
          116.79224, 39.87892, 116.79387, 39.87772, 116.79478, 39.87734, 116.79810, 39.87676, 116.79821, 39.88370,
          116.80221, 39.88374, 116.80227, 39.88846, 116.80627, 39.88855, 116.80709, 39.88014, 116.80978, 39.88015,
          116.81100, 39.87750, 116.81361, 39.87786, 116.81767, 39.87800, 116.81912, 39.87755, 116.82128, 39.87593,
          116.82407, 39.87220, 116.82624, 39.86859, 116.83091, 39.86362, 116.83343, 39.86467, 116.83794, 39.85981,
          116.84128, 39.85753, 116.84236, 39.85785, 116.84659, 39.85796, 116.84722, 39.85610, 116.84759, 39.85614,
          116.84788, 39.85421, 116.84914, 39.85377, 116.85122, 39.84859, 116.85123, 39.84780, 116.85235, 39.84739,
          116.85958, 39.84585, 116.86012, 39.84283, 116.86224, 39.84255, 116.86599, 39.84088, 116.86611, 39.84088,
          116.86623, 39.84127, 116.86790, 39.84134, 116.86776, 39.84265, 116.87042, 39.84214, 116.87271, 39.84120,
          116.87236, 39.84236, 116.87238, 39.84416, 116.87772, 39.84447, 116.87975, 39.84354, 116.88571, 39.83758,
          116.88700, 39.83471, 116.88868, 39.83313, 116.89159, 39.83154, 116.89433, 39.83056, 116.89743, 39.82965,
          116.89914, 39.82958, 116.90078, 39.83032, 116.90152, 39.83163, 116.90165, 39.83307, 116.89957, 39.83722,
          116.89801, 39.83874, 116.89697, 39.84030, 116.89633, 39.84223, 116.89601, 39.84408, 116.89614, 39.84581,
          116.89633, 39.84657, 116.89690, 39.84721, 116.90281, 39.84783, 116.90273, 39.84919, 116.90445, 39.84956,
          116.90806, 39.84790, 116.91150, 39.84586, 116.91547, 39.84165, 116.91831, 39.83732, 116.91994, 39.83435,
          116.92106, 39.83082, 116.92159, 39.82798, 116.92204, 39.82351, 116.92291, 39.81986, 116.92304, 39.81827,
          116.92283, 39.81546, 116.92234, 39.81394, 116.92224, 39.81310, 116.92252, 39.81202, 116.92305, 39.81113,
          116.92383, 39.81031, 116.92928, 39.80664, 116.93267, 39.80384, 116.93449, 39.80291, 116.93638, 39.80239,
          116.93686, 39.80054, 116.93382, 39.80032, 116.93350, 39.80058, 116.93097, 39.80047, 116.93077, 39.80013,
          116.92884, 39.80008, 116.93074, 39.79535, 116.92982, 39.79503, 116.93031, 39.79403, 116.93129, 39.79414,
          116.93234, 39.79206, 116.93374, 39.79215, 116.94267, 39.79035, 116.94420, 39.79057, 116.94482, 39.79043,
          116.94629, 39.78921, 116.94661, 39.78870, 116.94758, 39.78647, 116.94782, 39.78555, 116.94778, 39.78497,
          116.94557, 39.78524, 116.94197, 39.78434, 116.94373, 39.77746, 116.94016, 39.77632, 116.93979, 39.77629,
          116.93971, 39.77704, 116.93989, 39.77815, 116.93664, 39.77741, 116.93570, 39.77885, 116.93330, 39.78028,
          116.92782, 39.78075, 116.91837, 39.78021, 116.91579, 39.77958, 116.91310, 39.77775, 116.91057, 39.77489,
          116.91240, 39.77151, 116.91498, 39.76812, 116.90967, 39.76501, 116.90809, 39.76449, 116.90852, 39.76382,
          116.90812, 39.76355, 116.90960, 39.76201, 116.90952, 39.76184, 116.90755, 39.76119, 116.90781, 39.76047,
          116.90756, 39.76038, 116.90469, 39.76124, 116.90237, 39.76568, 116.90086, 39.76424, 116.89800, 39.76315,
          116.89591, 39.76259, 116.89650, 39.75809, 116.89368, 39.75773, 116.89365, 39.75759, 116.89564, 39.75417,
          116.90134, 39.75492, 116.90132, 39.75284, 116.90209, 39.75261, 116.90173, 39.75063, 116.90334, 39.75036,
          116.90386, 39.74758, 116.90485, 39.74779, 116.90500, 39.74692, 116.90594, 39.74692, 116.90726, 39.74493,
          116.90596, 39.74386, 116.90637, 39.74295, 116.90685, 39.74325, 116.90853, 39.74072, 116.90476, 39.73991,
          116.90516, 39.73695, 116.90671, 39.73711, 116.90702, 39.73465, 116.91043, 39.73484, 116.91080, 39.73036,
          116.90529, 39.73047, 116.90088, 39.72971, 116.90010, 39.72932, 116.89638, 39.72838, 116.89665, 39.72664,
          116.89385, 39.72649, 116.89385, 39.72513, 116.89368, 39.72506, 116.88919, 39.72458, 116.88770, 39.72422,
          116.88630, 39.72445, 116.88168, 39.72448, 116.88082, 39.72195, 116.87945, 39.72198, 116.87866, 39.71888,
          116.87686, 39.71762, 116.87685, 39.71738, 116.87862, 39.71508, 116.88066, 39.71540, 116.88122, 39.71328,
          116.88003, 39.71312, 116.88115, 39.71179, 116.88047, 39.70597, 116.88130, 39.70598, 116.88228, 39.70174,
          116.88065, 39.70100, 116.88119, 39.70035, 116.88318, 39.69916, 116.88445, 39.69987, 116.88491, 39.69858,
          116.88579, 39.69846, 116.88664, 39.69721, 116.88608, 39.69686, 116.88795, 39.69485, 116.88652, 39.69417,
          116.88784, 39.69232, 116.88192, 39.68992, 116.88401, 39.68663, 116.88553, 39.68677, 116.88459, 39.68799,
          116.88661, 39.68896, 116.88704, 39.68806, 116.88726, 39.68799, 116.89699, 39.68956, 116.89712, 39.68872,
          116.89890, 39.68877, 116.90005, 39.68689, 116.90668, 39.68820, 116.90621, 39.69023, 116.90640, 39.69024,
          116.90626, 39.69144, 116.90546, 39.69185, 116.90538, 39.69440, 116.90582, 39.69444, 116.90586, 39.69421,
          116.90765, 39.69441, 116.90693, 39.69682, 116.90962, 39.69723, 116.91383, 39.69501, 116.91361, 39.69717,
          116.91095, 39.69831, 116.91038, 39.70276, 116.91100, 39.70273, 116.91101, 39.70535, 116.91407, 39.70574,
          116.92194, 39.70520, 116.92465, 39.70536, 116.92645, 39.70566, 116.92675, 39.70460, 116.92725, 39.70456,
          116.92741, 39.70395, 116.92848, 39.70414, 116.92887, 39.70249, 116.93002, 39.70248, 116.93030, 39.70324,
          116.93072, 39.70361, 116.93161, 39.70491, 116.93172, 39.70535, 116.94485, 39.70574, 116.94646, 39.70027,
          116.94665, 39.69857, 116.94527, 39.69838, 116.94390, 39.70184, 116.94238, 39.70175, 116.94201, 39.70058,
          116.93969, 39.69714, 116.93973, 39.69598, 116.93890, 39.69447, 116.93860, 39.69407, 116.93758, 39.69415,
          116.93717, 39.69337, 116.93720, 39.69274, 116.93762, 39.69173, 116.93877, 39.68979, 116.93827, 39.68910,
          116.93848, 39.68892, 116.93885, 39.68736, 116.93837, 39.68692, 116.93814, 39.68643, 116.93816, 39.68574,
          116.93901, 39.68359, 116.93978, 39.68221, 116.94050, 39.68138, 116.94109, 39.68162, 116.94297, 39.67934,
          116.94337, 39.67956, 116.94546, 39.67707, 116.94477, 39.67623, 116.93949, 39.67554, 116.93973, 39.67406,
          116.93928, 39.67395, 116.93975, 39.67259, 116.93971, 39.66972, 116.95149, 39.66516, 116.94990, 39.66078,
          116.94933, 39.65757, 116.95026, 39.65504, 116.95172, 39.64997, 116.95370, 39.64662, 116.95636, 39.64307,
          116.95692, 39.64261, 116.95758, 39.64235, 116.95833, 39.64248, 116.95894, 39.64332, 116.96209, 39.64522,
          116.96342, 39.64643, 116.96429, 39.64760, 116.96459, 39.64776, 116.96531, 39.64776, 116.96600, 39.64743,
          116.96861, 39.64553, 116.96906, 39.64486, 116.96927, 39.64371, 116.96892, 39.63816, 116.96721, 39.63790,
          116.96848, 39.63566, 116.96950, 39.63585, 116.97095, 39.63522, 116.97249, 39.63620, 116.97383, 39.63680,
          116.97451, 39.63691, 116.97485, 39.63680, 116.97734, 39.63743, 116.97758, 39.63757, 116.97758, 39.63788,
          116.98252, 39.63934, 116.98393, 39.63775, 116.98506, 39.63797, 116.98377, 39.64031, 116.99819, 39.64329,
          116.99806, 39.64449, 117.00126, 39.64510, 117.00109, 39.64620, 117.00180, 39.64635, 117.00165, 39.64736,
          117.00325, 39.64751, 117.00329, 39.64724, 117.00397, 39.64733, 117.00401, 39.64697, 117.00531, 39.64701,
          117.00502, 39.64995, 117.00954, 39.65072, 117.00950, 39.65281, 117.01772, 39.65141, 117.02680, 39.64937,
          117.03113, 39.64771, 117.03450, 39.64664, 117.03912, 39.64548, 117.04283, 39.64489, 117.05064, 39.64322,
          117.05516, 39.64188, 117.06068, 39.63987, 117.07212, 39.63652, 117.08179, 39.63211, 117.08747, 39.63014,
          117.09444, 39.62827, 117.09401, 39.62747, 117.09681, 39.62654, 117.09678, 39.62377, 117.10114, 39.62416,
          117.10193, 39.62139, 117.10249, 39.62147, 117.10226, 39.62426, 117.10587, 39.62302, 117.10617, 39.61999,
          117.10869, 39.61999, 117.10886, 39.61961, 117.10973, 39.61973, 117.10996, 39.61924, 117.11083, 39.61930,
          117.11110, 39.61769, 117.11470, 39.61780, 117.11416, 39.62024, 117.11440, 39.62027, 117.11537, 39.61591,
          117.12078, 39.61559, 117.12089, 39.61547, 117.12299, 39.61575, 117.12249, 39.61656, 117.11940, 39.61642,
          117.11761, 39.61917, 117.11783, 39.61954, 117.11817, 39.61943, 117.11861, 39.62054, 117.12428, 39.61872,
          117.12961, 39.61672, 117.12984, 39.61705, 117.13129, 39.61775, 117.13361, 39.61960, 117.13918, 39.61933,
          117.13973, 39.61951, 117.14009, 39.62003, 117.13978, 39.62108, 117.14175, 39.62131, 117.14619, 39.62218,
          117.14571, 39.62449, 117.14771, 39.62471, 117.14550, 39.62599, 117.14382, 39.62730, 117.14433, 39.62947,
          117.14779, 39.62948, 117.14827, 39.62973, 117.15150, 39.63527, 117.15297, 39.63528, 117.15663, 39.63475,
          117.16182, 39.63491, 117.16177, 39.63543, 117.16641, 39.63546, 117.16659, 39.63991, 117.16779, 39.64008,
          117.16796, 39.64134, 117.17149, 39.64168, 117.17126, 39.64433, 117.16485, 39.64542, 117.16264, 39.64684,
          117.16282, 39.65049, 117.15994, 39.65026, 117.16001, 39.65169, 117.15758, 39.65042, 117.15759, 39.65277,
          117.15671, 39.65273, 117.15670, 39.65412, 117.15648, 39.65418, 117.15643, 39.65524, 117.15671, 39.65538,
          117.15702, 39.65748, 117.15643, 39.65749, 117.15669, 39.65873, 117.15551, 39.65873, 117.15525, 39.65735,
          117.15433, 39.65736, 117.15445, 39.65902, 117.15302, 39.65925, 117.15297, 39.65989, 117.15246, 39.65990,
          117.15229, 39.66269, 117.15346, 39.66270, 117.15316, 39.66552, 117.15340, 39.66565, 117.15557, 39.66565,
          117.15822, 39.66539, 117.15819, 39.66778, 117.16014, 39.66848, 117.15970, 39.67165, 117.16368, 39.67206,
          117.16227, 39.68106, 117.16168, 39.68101, 117.16152, 39.68167, 117.16142, 39.68227, 117.16190, 39.68234,
          117.16128, 39.68556, 117.16349, 39.68582, 117.16323, 39.68786, 117.16393, 39.68794, 117.16302, 39.69691,
          117.16422, 39.69745, 117.16484, 39.69995, 117.16381, 39.70028, 117.16256, 39.70130, 117.16260, 39.70221,
          117.16218, 39.70219, 117.16217, 39.70290, 117.16418, 39.70304, 117.16367, 39.70382, 117.16210, 39.70376,
          117.16186, 39.70684, 117.16426, 39.70699, 117.16271, 39.71221, 117.16020, 39.71202, 117.16024, 39.71083,
          117.15784, 39.71050, 117.15713, 39.71448, 117.15885, 39.71506, 117.15919, 39.71548, 117.15922, 39.71616,
          117.16277, 39.71627, 117.16237, 39.71839, 117.16189, 39.71918, 117.16173, 39.72022, 117.15987, 39.72087,
          117.15963, 39.71749, 117.15891, 39.71742, 117.15900, 39.71662, 117.15860, 39.71660, 117.15835, 39.71749,
          117.15804, 39.71750, 117.15772, 39.71909, 117.15426, 39.71946, 117.15422, 39.72082, 117.15086, 39.72087,
          117.15086, 39.72133, 117.15247, 39.72170, 117.15241, 39.72205, 117.14672, 39.72139, 117.14664, 39.72261,
          117.14882, 39.72790, 117.14685, 39.72849, 117.14799, 39.73061, 117.14790, 39.73119, 117.14752, 39.73136,
          117.14751, 39.73229, 117.14668, 39.73213, 117.14719, 39.73497, 117.15405, 39.73513, 117.15359, 39.73681,
          117.15396, 39.73730, 117.15392, 39.73768, 117.15480, 39.73760, 117.15658, 39.73705, 117.15721, 39.73666,
          117.15780, 39.73588, 117.15818, 39.73566, 117.15878, 39.73565, 117.15906, 39.73581, 117.15967, 39.73670,
          117.15901, 39.73753, 117.15872, 39.73907, 117.15755, 39.74139, 117.15604, 39.74366, 117.15565, 39.74479,
          117.15542, 39.74680, 117.15656, 39.74856, 117.15696, 39.74846, 117.15780, 39.74910, 117.15838, 39.74919,
          117.15975, 39.74844, 117.16077, 39.74821, 117.16282, 39.74894, 117.16287, 39.74916, 117.16664, 39.75057,
          117.16997, 39.75087, 117.17134, 39.75051, 117.17481, 39.75089, 117.17833, 39.75061, 117.17855, 39.75128,
          117.17890, 39.75155, 117.18052, 39.75451, 117.18415, 39.75386, 117.18643, 39.75370, 117.18812, 39.75696,
          117.18857, 39.75856, 117.19135, 39.75782, 117.19172, 39.75903, 117.19536, 39.75864, 117.19952, 39.76258,
          117.19367, 39.76739, 117.19241, 39.76903, 117.19229, 39.77070, 117.19104, 39.77076, 117.19081, 39.77044,
          117.18676, 39.77392, 117.18210, 39.77651, 117.17845, 39.77799, 117.17606, 39.77962, 117.17603, 39.78056,
          117.17525, 39.78049, 117.17420, 39.78115, 117.17406, 39.78480, 117.17357, 39.78525, 117.17357, 39.78581,
          117.17314, 39.78750, 117.17301, 39.78975, 117.17231, 39.79404, 117.17000, 39.79386, 117.16993, 39.79456,
          117.16932, 39.79460, 117.16900, 39.79619, 117.16549, 39.79595, 117.16482, 39.79848, 117.16132, 39.79834,
          117.15942, 39.79538, 117.15865, 39.79631, 117.15808, 39.79669, 117.15650, 39.79722, 117.15573, 39.79712,
          117.15538, 39.79692, 117.15507, 39.79559, 117.15103, 39.79538, 117.15057, 39.80100, 117.15112, 39.80111,
          117.15068, 39.80541, 117.15368, 39.80512, 117.15375, 39.80568, 117.15520, 39.80568, 117.15037, 39.81439,
          117.14986, 39.81613, 117.15116, 39.81634, 117.15142, 39.81806, 117.15239, 39.81821, 117.15261, 39.82052,
          117.15342, 39.81941, 117.15606, 39.81648, 117.15822, 39.81756, 117.16074, 39.81787, 117.16070, 39.82240,
          117.16447, 39.82266, 117.16465, 39.82300, 117.17072, 39.82351, 117.17434, 39.82355, 117.17472, 39.82419,
          117.18413, 39.82508, 117.18505, 39.82388, 117.18749, 39.82438, 117.18867, 39.82421, 117.18799, 39.82669,
          117.18675, 39.82960, 117.18643, 39.82958, 117.18576, 39.83180, 117.19137, 39.83252, 117.19253, 39.83307,
          117.19346, 39.83332, 117.19428, 39.83132, 117.20097, 39.83373, 117.20205, 39.83013, 117.20402, 39.83087,
          117.20609, 39.83104, 117.20811, 39.83081, 117.21375, 39.82938, 117.21430, 39.82595, 117.21791, 39.82729,
          117.21987, 39.82971, 117.22090, 39.83033, 117.22316, 39.83117, 117.22735, 39.83236, 117.22963, 39.83269,
          117.23102, 39.83268, 117.23825, 39.83137, 117.25019, 39.82855, 117.25086, 39.82856, 117.25010, 39.83015,
          117.25007, 39.83074, 117.24979, 39.83127, 117.24926, 39.83151, 117.24715, 39.83076, 117.24611, 39.83083,
          117.24539, 39.83200, 117.24527, 39.83261, 117.24549, 39.83306, 117.24586, 39.83336, 117.24816, 39.83404,
          117.24875, 39.83457, 117.24893, 39.83502, 117.24888, 39.83541, 117.24705, 39.83684, 117.24697, 39.83724,
          117.24701, 39.83755, 117.24858, 39.83911, 117.24920, 39.84143, 117.25014, 39.84167, 117.25127, 39.84141,
          117.25249, 39.84143, 117.25321, 39.84170, 117.25359, 39.84215, 117.25361, 39.84278, 117.25334, 39.84328,
          117.25181, 39.84488, 117.25118, 39.84607, 117.25093, 39.84707, 117.24920, 39.84844, 117.24757, 39.85119,
          117.24568, 39.85365, 117.24532, 39.85430, 117.24554, 39.85536, 117.24550, 39.85604, 117.24526, 39.85658,
          117.24214, 39.85915, 117.24108, 39.85982, 117.23956, 39.86009, 117.23791, 39.86005, 117.23501, 39.85940,
          117.23343, 39.85921, 117.23233, 39.85822, 117.23178, 39.85563, 117.23151, 39.85514, 117.23052, 39.85455,
          117.22886, 39.85448, 117.22818, 39.85467, 117.22609, 39.85575, 117.22521, 39.85586, 117.22449, 39.85566,
          117.22381, 39.85505, 117.22356, 39.85442, 117.22336, 39.85215, 117.22309, 39.85178, 117.22255, 39.85156,
          117.22143, 39.85153, 117.21658, 39.85417, 117.21368, 39.85530, 117.21133, 39.85579, 117.21043, 39.85577,
          117.20680, 39.85501, 117.20606, 39.85512, 117.20566, 39.85550, 117.20545, 39.85609, 117.20523, 39.85825,
          117.20473, 39.85866, 117.20083, 39.85888, 117.19856, 39.85938, 117.19437, 39.86082, 117.19333, 39.86100,
          117.19273, 39.86103, 117.19191, 39.86080, 117.19016, 39.85990, 117.18872, 39.85983, 117.18770, 39.85997,
          117.18678, 39.86031, 117.18597, 39.86082, 117.18270, 39.86411, 117.18119, 39.86513, 117.18056, 39.86533,
          117.17984, 39.86533, 117.17932, 39.86513, 117.17833, 39.86368, 117.17718, 39.86285, 117.17552, 39.86256,
          117.17439, 39.86281, 117.17385, 39.86315, 117.17367, 39.86396, 117.17493, 39.86603, 117.17486, 39.86733,
          117.17461, 39.86790, 117.17196, 39.86959, 117.17141, 39.86957, 117.17071, 39.86925, 117.17018, 39.86871,
          117.16986, 39.86783, 117.16977, 39.86661, 117.16913, 39.86551, 117.16844, 39.86510, 117.16763, 39.86485,
          117.16538, 39.86476, 117.16197, 39.86535, 117.16026, 39.86646, 117.16005, 39.86682, 117.16008, 39.86727,
          117.16038, 39.86761, 117.16738, 39.87173, 117.16795, 39.87229, 117.16803, 39.87340, 117.16768, 39.87401,
          117.16571, 39.87531, 117.16407, 39.87619, 117.16357, 39.87617, 117.16330, 39.87583, 117.16328, 39.87405,
          117.16276, 39.87313, 117.16170, 39.87170, 117.16061, 39.87113, 117.15919, 39.87119, 117.15817, 39.87147,
          117.15782, 39.87198, 117.15710, 39.87395, 117.15614, 39.87550, 117.15128, 39.87739, 117.15038, 39.87685,
          117.14981, 39.87607, 117.14818, 39.87510, 117.14719, 39.87426, 117.14636, 39.87412, 117.14599, 39.87443,
          117.14576, 39.87537, 117.14567, 39.87610, 117.14588, 39.87680, 117.14644, 39.87791, 117.14712, 39.87863,
          117.14811, 39.88010, 117.14873, 39.88210, 117.14889, 39.88357, 117.14915, 39.88406, 117.15017, 39.88575,
          117.15165, 39.88743, 117.15193, 39.88796, 117.15059, 39.88916, 117.14491, 39.89346, 117.14262, 39.89491,
          117.14182, 39.89604, 117.14168, 39.89735, 117.14227, 39.89925, 117.14406, 39.90068, 117.15110, 39.90323,
          117.15238, 39.90512, 117.15267, 39.90694, 117.15235, 39.90785, 117.15103, 39.90880, 117.14908, 39.90920,
          117.14680, 39.90897, 117.14185, 39.90881, 117.14006, 39.90907, 117.13898, 39.90954, 117.13826, 39.91020,
          117.13779, 39.91152, 117.13760, 39.91363, 117.13601, 39.91741, 117.13529, 39.91768, 117.13351, 39.91777,
          117.13020, 39.91825, 117.12945, 39.91854, 117.12931, 39.91897, 117.12940, 39.91957, 117.13008, 39.92012,
          117.13516, 39.92036, 117.13701, 39.92071, 117.14338, 39.92287, 117.14352, 39.92335, 117.14215, 39.92426,
          117.14119, 39.92536, 117.14097, 39.92729, 117.13959, 39.93018, 117.13960, 39.93120, 117.13990, 39.93176,
          117.14275, 39.93421, 117.14347, 39.93450, 117.14423, 39.93467, 117.14503, 39.93454, 117.14584, 39.93425,
          117.14855, 39.93278, 117.14929, 39.93288, 117.14991, 39.93330, 117.15089, 39.93458, 117.15095, 39.93544,
          117.15038, 39.93668, 117.14706, 39.94068, 117.14420, 39.94277, 117.14198, 39.94257, 117.14109, 39.94286,
          117.13942, 39.94477, 117.14045, 39.94590, 117.14183, 39.94522, 117.14454, 39.94349, 117.14524, 39.94414,
          117.14598, 39.94527, 117.14671, 39.94571, 117.14715, 39.94627, 117.14936, 39.94751, 117.15216, 39.94941,
          117.15509, 39.95042, 117.15805, 39.95073, 117.15979, 39.95308, 117.16001, 39.95357, 117.15994, 39.95403,
          117.15905, 39.95556, 117.15880, 39.95628, 117.15846, 39.95853, 117.15872, 39.96004, 117.15782, 39.96134,
          117.15794, 39.96159, 117.15840, 39.96178, 117.15609, 39.96331, 117.15442, 39.96380, 117.15434, 39.96429,
          117.15504, 39.96466, 117.15979, 39.96160, 117.16138, 39.96213, 117.16152, 39.96243, 117.16475, 39.96241,
          117.16594, 39.96174, 117.16743, 39.95792, 117.16948, 39.95779, 117.16988, 39.95924, 117.17190, 39.96267,
          117.17268, 39.96312, 117.17250, 39.96372, 117.17322, 39.96428, 117.17366, 39.96819, 117.17212, 39.96828,
          117.17203, 39.96878, 117.17234, 39.96956, 117.17302, 39.96956, 117.17217, 39.97597, 117.17319, 39.97603,
          117.17324, 39.97644, 117.17444, 39.97649, 117.17512, 39.97684, 117.17908, 39.97664, 117.17920, 39.97717,
          117.18169, 39.97750, 117.18157, 39.97904, 117.18327, 39.97910, 117.18318, 39.98046, 117.18472, 39.98052,
          117.18446, 39.98517, 117.18696, 39.98522, 117.18688, 39.98806, 117.18809, 39.98830, 117.18812, 39.98848,
          117.18886, 39.98904, 117.18989, 39.98933, 117.19039, 39.99133, 117.19169, 39.99146, 117.19183, 39.99435,
          117.19126, 39.99446, 117.19123, 39.99487, 117.19092, 39.99492, 117.19124, 39.99724, 117.19063, 39.99739,
          117.19092, 39.99898, 117.19053, 39.99955, 117.19020, 39.99968, 117.19001, 40.00038, 117.18959, 40.00081,
          117.18933, 40.00265, 117.19031, 40.00347, 117.19045, 40.00507, 117.18999, 40.00683, 117.19099, 40.00812,
          117.19125, 40.00930, 117.19084, 40.00970, 117.19029, 40.00979, 117.18994, 40.00960, 117.18979, 40.00916,
          117.18949, 40.00889, 117.18885, 40.00870, 117.18922, 40.01108, 117.18846, 40.01161, 117.18798, 40.01405,
          117.18701, 40.01500, 117.18679, 40.01547, 117.18729, 40.01883, 117.18766, 40.02027, 117.18610, 40.02164,
          117.18498, 40.02233, 117.18355, 40.02256, 117.18268, 40.02288, 117.18213, 40.02337, 117.18137, 40.02456,
          117.18163, 40.02631, 117.18141, 40.02957, 117.18188, 40.03124, 117.18170, 40.03188, 117.18063, 40.03296,
          117.18079, 40.03467, 117.18027, 40.03580, 117.18071, 40.03863, 117.18037, 40.04056, 117.18089, 40.04132,
          117.18094, 40.04200, 117.18065, 40.04235, 117.18087, 40.04371, 117.18123, 40.04447, 117.18052, 40.04512,
          117.18156, 40.04540, 117.18203, 40.04568, 117.18229, 40.04594, 117.18227, 40.04647, 117.18105, 40.04847,
          117.18022, 40.04917, 117.17998, 40.04981, 117.17932, 40.05030, 117.17817, 40.05077, 117.17696, 40.05172,
          117.17686, 40.05229, 117.17764, 40.05332, 117.17764, 40.05376, 117.17661, 40.05530, 117.17549, 40.05658,
          117.17532, 40.05770, 117.17590, 40.05883, 117.17659, 40.05936, 117.17667, 40.06030, 117.17762, 40.06127,
          117.17848, 40.06049, 117.17924, 40.06022, 117.18069, 40.06018, 117.18134, 40.05998, 117.18249, 40.06080,
          117.18300, 40.06088, 117.18558, 40.06019, 117.18529, 40.06283, 117.18595, 40.06430, 117.18593, 40.06497,
          117.18729, 40.06534, 117.18810, 40.06521, 117.18907, 40.06529, 117.19110, 40.06492, 117.19199, 40.06465,
          117.19284, 40.06404, 117.19421, 40.06404, 117.19549, 40.06358, 117.19610, 40.06369, 117.19638, 40.06340,
          117.19671, 40.06246, 117.19714, 40.06232, 117.19819, 40.06240, 117.19877, 40.06277, 117.19942, 40.06270,
          117.20002, 40.06286, 117.20290, 40.06451, 117.20464, 40.06362, 117.20548, 40.06286, 117.20681, 40.06359,
          117.20798, 40.06399, 117.20886, 40.06388, 117.21008, 40.06345, 117.21099, 40.06337, 117.21147, 40.06313,
          117.21255, 40.06316, 117.21331, 40.06331, 117.21439, 40.06383, 117.21585, 40.06391, 117.21647, 40.06426,
          117.21661, 40.06450, 117.21652, 40.06539, 117.21514, 40.06656, 117.21366, 40.06821, 117.21333, 40.06986,
          117.21181, 40.07061, 117.21116, 40.07141, 117.20953, 40.07178, 117.20871, 40.07240, 117.20848, 40.07320,
          117.20793, 40.07389, 117.20782, 40.07461, 117.20714, 40.07537, 117.20662, 40.07814, 117.20565, 40.07908,
          117.20496, 40.08016, 117.20337, 40.08097, 117.20287, 40.08092, 117.20214, 40.08123, 117.20138, 40.08121,
          117.20022, 40.08014, 117.19786, 40.07837, 117.19707, 40.07722, 117.19719, 40.07542, 117.20176, 40.07555,
          117.20155, 40.07425, 117.20066, 40.07226, 117.20022, 40.07170, 117.19919, 40.07129, 117.19912, 40.06954,
          117.19882, 40.06901, 117.19717, 40.06833, 117.19517, 40.06804, 117.19399, 40.06768, 117.19344, 40.06714,
          117.19276, 40.06597, 117.19114, 40.06645, 117.19215, 40.06880, 117.19005, 40.06968, 117.18942, 40.06944,
          117.18774, 40.06984, 117.18692, 40.07068, 117.18657, 40.07131, 117.18584, 40.07142, 117.18541, 40.07167,
          117.18477, 40.07312, 117.18465, 40.07556, 117.18264, 40.07819, 117.18232, 40.07911, 117.18238, 40.07984,
          117.18284, 40.08068, 117.18395, 40.08109, 117.18276, 40.08154, 117.18157, 40.08285, 117.18127, 40.08300,
          117.18038, 40.08293
        ]
        var beisan = []
        for (var i = 0; i < langfang_beisan.length; i++) {
          if (i % 2 == 0) {
            var temp = [langfang_beisan[i], langfang_beisan[i + 1]]
            beisan.push(temp)
          } else {
            continue;
          }
        }
        //==

        //================================================================================
        var styles = {
          'grid': new Style({
            stroke: new Stroke({
              width: 3,
              color: [255, 0, 0, 0.8],
              // lineDash: [0.5, 4]
            }),
            fill: new Fill({
              color: 'rgba(0,255,255,0.4)'
            })
          }),
          'range': new Style({
            stroke: new Stroke({
              width: 3,
              color: [0, 255, 0, 1],
              lineDash: [0.5, 4]
            })
          }),
          'icon': new Style({
            image: new Icon({
              anchor: [0.5, 1],
              scale: 0.1,
              src: require('../../assets/logo.png')
            })
          }),
          'geoMarker': new Style({
            image: new CircleStyle({
              radius: 7,
              fill: new Fill({
                color: 'black'
              }),
              stroke: new Stroke({
                color: 'white',
                width: 2
              })
            })
          })
        };
        var iconFeature = new Feature(new Point(point00));
        iconFeature.setStyle(createStyle(require('../../assets/logo.png'), undefined));
        var layers = [
          new TileLayer({
            // extent: extents.HuBei,
            title: "天地图注记",
            source: new XYZSource({
              url: "http://t2.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=c2c3b8a03c3d2a2b8f4afea1227e6891"
            })
          }),
          new TileLayer({
            // extent: extents.HuBei,
            title: "天地图行政区划",
            source: new XYZSource({
              url: "http://t3.tianditu.com/DataServer?T=cva_w&x={x}&y={y}&l={z}&tk=c2c3b8a03c3d2a2b8f4afea1227e6891"
            })
          }),
          new VectorLayer({
            source: new VectorSource({
              features: [iconFeature]
            })
          }),
          // new VectorLayer({
          //   source: new VectorSource({
          //     features: [line_f],
          //     projection: 'EPSG:4326'
          //   })
          // }),
        ];
        map = new Map({
          controls: defaultControls().extend([
            new FullScreen(), mousePositionControl
          ]),
          layers: layers,
          target: 'map',
          view: new View({
            projection: 'EPSG:4326',
            center: [114.30, 30.60],
            zoom: 10,
            maxZoom: 18
          })
        });
        // for(var i=0;i<featuregrid.length;i++){

        // }
        // // change mouse cursor when over marker
        // var select = null; // ref to currently selected interaction
        // var selectClick = new Select({
        //   condition: click
        // });
        // select = selectClick;
        // if (select !== null) {
        //   map.removeInteraction(select);
        // }
        // map.addInteraction(selectClick);
        // select.on('select', function(e) {
        //   var features=e.target.getFeatures().getArray();
        //   if(features.length>0){
        //   console.log(features);//获取ID
        //   features[0].setStyle(onlystyle);
        //   alert(features[0].getId());
        //   }
        // })
        // display popup on click
        var element = document.getElementById('popup');
        var content = document.getElementById('popup-content');
        var popup = new Overlay({
          element: element,
          positioning: 'bottom-center',
          stopEvent: false,
          offset: [0, 0]
        });
        map.addOverlay(popup);
        map.on('click', function (evt) {
          var feature = map.forEachFeatureAtPixel(evt.pixel,
            function (feature) {
              return feature;
            });
          if (feature) {
            element.style.display = "block";
            var id = feature.getId();
            feature.setStyle(onlystyle);
            var coordinates = feature.getGeometry().getFirstCoordinate();
            content.innerHTML = id;
            popup.setPosition(coordinates);
            // map.getView().setCenter(coordinates);
            // $(element).popover({
            //   placement: 'top',
            //   html: true,
            //   content: id
            // });
            // $(element).popover('show');
          } else {
            // $(element).popover('destroy');
            element.style.display = "none";
          }
        });
        map.on('pointermove', function (evt) {
          if (evt.dragging) {
            $(element).popover('destroy');
            return;
          }
          map.getTargetElement().style.cursor =
            map.hasFeatureAtPixel(evt.pixel) ? 'pointer' : '';
        });
        this.$options.methods.addlayer(5000);
      },
      addlayer(a){
        console.log(a);
        map.removeLayer(layer);
        featuregrid=[];
        layer='';
        var linestyle = new Style({
          stroke: new Stroke({
            color: '#6A5ACD',
            width: 1
          }),
          fill: new Fill({
            color: 'rgba(135,206,250,0.2)'
          })
        })
        var gridstyle = new Style({
          stroke: new Stroke({
            color: '#ff0000',
            width: 1
          }),
          fill: new Fill({
            color: 'rgba(0,255,0,0.2)'
          })
        })
        var onlystyle = new Style({
          stroke: new Stroke({
            color: '#0000ff',
            width: 1
          }),
          fill: new Fill({
            color: 'rgba(0,255,255,0.4)'
          })
        })
        var coord3 = [
          []
        ];
        // var points =
        //   "110.989 33.253,111.174 33.117,111.283 32.862,111.574 32.591,111.712 32.608,111.873 32.506,112.306 32.328,112.54 32.406,112.762 32.346,112.868 32.399,113.112 32.378,113.205 32.434,113.422 32.272,113.606 32.363,113.733 32.258,113.854 31.842,114.288 31.754,114.581 31.764,114.639 31.582,114.825 31.461,115.119 31.6,115.205 31.447,115.368 31.407,115.579 31.145,115.707 31.2,116.026 31.011,115.862 30.868,115.758 30.687,115.915 30.518,115.88 30.382,116.053 30.217,116.131 29.825,115.961 29.727,115.663 29.853,115.506 29.843,115.354 29.649,115.226 29.654,115.119 29.512,114.976 29.567,114.864 29.408,114.509 29.326,114.254 29.346,113.937 29.05,113.68 29.09,113.604 29.254,113.734 29.592,113.658 29.687,113.356 29.69,113.139 29.452,112.906 29.61,112.926 29.764,112.645 29.595,112.433 29.635,112.364 29.545,111.909 29.855,111.73 29.924,111.546 29.898,111.237 30.043,110.925 30.066,110.764 30.123,110.487 30.022,110.63 29.763,110.368 29.636,110.114 29.793,109.777 29.761,109.702 29.61,109.524 29.628,109.425 29.53,109.228 29.122,109.106 29.219,109.061 29.403,108.916 29.329,108.882 29.636,108.739 29.659,108.598 29.867,108.514 29.885,108.578 30.259,108.41 30.481,108.694 30.549,108.839 30.509,108.963 30.627,109.146 30.53,109.356 30.553,109.898 30.903,110.146 30.914,110.115 31.092,110.159 31.305,109.919 31.524,109.741 31.58,109.581 31.729,109.635 31.819,109.555 32.221,109.555 32.221,109.498 32.393,109.62 32.599,110.124 32.619,110.096 32.836,109.798 32.879,109.793 32.88,109.787 33.012,109.787 33.013,109.618 33.272,109.619 33.273,110.208 33.164,110.466 33.183,110.707 33.097,110.989 33.253";//湖北省
        //var points="117.383 40.226,117.203 40.081,116.775 40.034,116.78 39.888,116.92 39.834,116.9 39.687,116.806 39.615,116.563 39.619,116.328 39.456,116.235 39.563,115.918 39.596,115.815 39.508,115.566 39.591,115.48 39.74,115.517 39.898,115.422 39.983,115.589 40.115,115.829 40.144,115.956 40.268,115.766 40.442,115.902 40.616,116.067 40.611,116.213 40.741,116.451 40.797,116.449 40.979,116.672 40.97,116.959 40.708,117.283 40.659,117.223 40.386,117.383 40.226";//北京市
       var points="106.525680 29.477950,106.527230 29.477510,106.530810 29.476180,106.536010 29.474010,106.538700 29.473340,106.540280 29.473240,106.543360 29.473400,106.545370 29.474080,106.546770 29.474930,106.547760 29.476020,106.549150 29.478050,106.550050 29.479990,106.550560 29.481180,106.550970 29.483130,106.551580 29.484750,106.554820 29.485990,106.557910 29.485640,106.563170 29.487090,106.566380 29.486450,106.567670 29.485820,106.569120 29.483480,106.569630 29.481480,106.570700 29.480700,106.572020 29.480860,106.574990 29.478930,106.576140 29.477720,106.575970 29.475910,106.577110 29.471190,106.577600 29.469810,106.578940 29.469340,106.584910 29.473380,106.588110 29.469940,106.591450 29.466080,106.593170 29.464390,106.595790 29.465100,106.596670 29.466780,106.597120 29.469100,106.598540 29.471000,106.603130 29.472540,106.604740 29.473920,106.607720 29.474160,106.609610 29.473780,106.611840 29.472620,106.612670 29.471220,106.611940 29.469690,106.614960 29.468220,106.618870 29.466870,106.620210 29.467670,106.622640 29.468100,106.625260 29.467730,106.626410 29.466050,106.627690 29.465770,106.630040 29.467400,106.632150 29.468400,106.636570 29.469930,106.638660 29.470340,106.640070 29.470380,106.641670 29.469870,106.643980 29.467890,106.645650 29.466110,106.646990 29.465450,106.649060 29.464950,106.651560 29.463070,106.652830 29.462360,106.654610 29.462810,106.654410 29.464130,106.654510 29.466210,106.655720 29.467250,106.657190 29.467790,106.659670 29.464390,106.662050 29.463420,106.664310 29.463750,106.666970 29.463230,106.666330 29.461310,106.664180 29.458920,106.665190 29.457660,106.667010 29.457700,106.669350 29.457710,106.672190 29.458370,106.675130 29.460130,106.676420 29.461360,106.677910 29.463160,106.680880 29.464830,106.683890 29.465780,106.685350 29.466430,106.687060 29.467600,106.685220 29.469930,106.682020 29.475030,106.684250 29.477840,106.687110 29.479110,106.688450 29.479880,106.690610 29.481610,106.691580 29.482640,106.692040 29.484680,106.690360 29.486670,106.691450 29.488420,106.693290 29.489220,106.702540 29.487910,106.704110 29.487150,106.705130 29.484900,106.703810 29.482380,106.704860 29.480990,106.706550 29.480870,106.709790 29.483370,106.712100 29.482990,106.721930 29.484250,106.727250 29.484460,106.730960 29.483860,106.732680 29.484100,106.735990 29.485470,106.737040 29.486190,106.738180 29.489450,106.739820 29.493370,106.740830 29.495270,106.745310 29.501910,106.747380 29.505410,106.748870 29.507300,106.752150 29.510930,106.753360 29.513050,106.753330 29.515330,106.760510 29.527140,106.761120 29.528860,106.764970 29.530790,106.765440 29.533240,106.766890 29.537090,106.768780 29.543490,106.769880 29.546770,106.770030 29.549090,106.772490 29.551970,106.776370 29.552350,106.782910 29.553500,106.782950 29.557270,106.784860 29.570440,106.788030 29.575700,106.789790 29.576600,106.792560 29.580280,106.797210 29.585140,106.799260 29.587070,106.800430 29.589570,106.801990 29.588930,106.803740 29.588500,106.805640 29.588200,106.807740 29.588270,106.809140 29.588450,106.812310 29.589390,106.815880 29.591180,106.817510 29.591560,106.819680 29.591810,106.823380 29.591340,106.825560 29.590440,106.827990 29.590260,106.830410 29.589680,106.832020 29.588630,106.834210 29.587170,106.836590 29.582200,106.839100 29.579310,106.840880 29.578050,106.845370 29.575650,106.847680 29.575300,106.849320 29.575380,106.851710 29.576140,106.852770 29.577650,106.855870 29.584360,106.856620 29.586470,106.857080 29.588420,106.857570 29.589740,106.858510 29.593190,106.860090 29.597140,106.860460 29.598350,106.860910 29.599910,106.861480 29.601410,106.862340 29.602750,106.863590 29.604230,106.866550 29.607220,106.868670 29.609700,106.872630 29.615570,106.873360 29.617090,106.873960 29.618400,106.874960 29.621820,106.875950 29.624410,106.877090 29.627280,106.878710 29.629410,106.880910 29.630790,106.882410 29.633610,106.884590 29.638460,106.886170 29.641490,106.889210 29.646670,106.890710 29.649710,106.891690 29.651740,106.894610 29.656190,106.895220 29.659220,106.896370 29.661800,106.897330 29.663210,106.899940 29.667820,106.903120 29.671860,106.906040 29.678230,106.909840 29.682170,106.915280 29.685560,106.918680 29.686230,106.922790 29.687390,106.927020 29.688560,106.929610 29.689740,106.932210 29.691120,106.934360 29.693630,106.937110 29.696960,106.938440 29.699380,106.939910 29.702010,106.940980 29.703730,106.943310 29.706720,106.943920 29.708250,106.944570 29.711900,106.945270 29.717600,106.945420 29.719130,106.945810 29.723390,106.945910 29.727220,106.946780 29.729950,106.947740 29.731360,106.950590 29.735710,106.953870 29.738830,106.957220 29.743250,106.958790 29.746180,106.959620 29.747230,106.960960 29.749310,106.961690 29.750730,106.962900 29.752650,106.964340 29.754360,106.965420 29.755970,106.967230 29.758400,106.968680 29.760820,106.970240 29.762840,106.971710 29.764280,106.973580 29.765950,106.975720 29.767450,106.978080 29.768550,106.980440 29.769330,106.982320 29.769820,106.984320 29.769900,106.987010 29.769250,106.989040 29.764840,106.991480 29.761510,106.991810 29.759950,106.992980 29.756760,106.993210 29.755440,106.990420 29.753700,106.988680 29.752430,106.987670 29.748720,106.989970 29.744430,106.990560 29.741380,106.989310 29.738810,106.989290 29.737090,106.992760 29.735680,106.994200 29.735360,106.996020 29.734590,106.997460 29.732480,106.997540 29.730470,106.996940 29.728010,106.996880 29.726170,106.998060 29.720280,106.998280 29.717580,106.998890 29.716440,107.001050 29.714380,107.000350 29.708720,106.998590 29.701310,106.996210 29.692870,106.993480 29.685670,106.993170 29.684260,106.992800 29.678680,106.991710 29.676100,106.990780 29.671120,106.990040 29.669060,106.987030 29.664860,106.986260 29.661710,106.984210 29.658460,106.984110 29.656160,106.985970 29.653700,106.986790 29.652330,106.985390 29.650540,106.983390 29.651010,106.981740 29.650080,106.980540 29.648230,106.975950 29.639030,106.974660 29.635750,106.974170 29.634080,106.974100 29.630580,106.971740 29.622250,106.970330 29.616280,106.968870 29.614840,106.967020 29.606270,106.966430 29.602550,106.965480 29.599490,106.962760 29.593560,106.957620 29.582440,106.957320 29.581200,106.957120 29.576690,106.954620 29.566250,106.952530 29.556320,106.952090 29.551230,106.954950 29.532450,106.954630 29.529070,106.953830 29.524150,106.949120 29.517720,106.947330 29.512900,106.946750 29.509360,106.945510 29.506860,106.944820 29.497130,106.943910 29.495430,106.942860 29.488210,106.942110 29.485490,106.941190 29.479930,106.939540 29.475980,106.939290 29.474410,106.937850 29.471460,106.937580 29.469080,106.934370 29.464960,106.933320 29.460560,106.933120 29.458630,106.933020 29.453550,106.931910 29.448480,106.933790 29.445820,106.934390 29.444600,106.935360 29.440530,106.934870 29.434890,106.935210 29.432400,106.933020 29.424050,106.932680 29.421810,106.932550 29.415150,106.932670 29.407920,106.930290 29.404900,106.930250 29.402870,106.931120 29.400710,106.929950 29.399230,106.926540 29.401270,106.923630 29.403410,106.921510 29.403360,106.921040 29.400320,106.920810 29.394980,106.920250 29.378600,106.919910 29.360080,106.920210 29.342230,106.920880 29.339270,106.920500 29.337030,106.920190 29.335070,106.919230 29.331170,106.919620 29.329310,106.921060 29.327280,106.920980 29.325320,106.920070 29.323180,106.919560 29.321560,106.919510 29.318970,106.921260 29.315660,106.921430 29.313860,106.921280 29.310240,106.920920 29.308480,106.919810 29.304980,106.919460 29.302360,106.920310 29.299750,106.922120 29.296920,106.922810 29.295530,106.924070 29.293450,106.925250 29.292430,106.926160 29.289590,106.926220 29.287310,106.926110 29.283210,106.926270 29.280980,106.927620 29.280080,106.931890 29.279600,106.933510 29.277390,106.934010 29.274030,106.934850 29.270120,106.935060 29.268140,106.934940 29.261590,106.934980 29.256840,106.940200 29.260280,106.941460 29.260580,106.942560 29.259620,106.943250 29.257980,106.943370 29.256010,106.945240 29.254110,106.948270 29.254710,106.949770 29.254850,106.951340 29.254410,106.952970 29.253220,106.953770 29.249880,106.954030 29.248240,106.954950 29.247000,106.956750 29.244590,106.956120 29.241340,106.954910 29.239640,106.956150 29.237370,106.955310 29.233650,106.955620 29.230370,106.956370 29.228890,106.959660 29.225120,106.964960 29.219070,106.966090 29.217080,106.968780 29.217360,106.968440 29.219030,106.970660 29.218760,106.972570 29.219120,106.972870 29.222040,106.974710 29.222110,106.975800 29.221400,106.975390 29.219060,106.975130 29.214930,106.975260 29.212640,106.976210 29.211640,106.975390 29.210690,106.973740 29.210200,106.973830 29.213010,106.974210 29.214380,106.974240 29.215760,106.973010 29.218020,106.970820 29.217440,106.969310 29.215520,106.969780 29.213560,106.970260 29.212170,106.970690 29.209060,106.969480 29.210290,106.969360 29.212710,106.968500 29.214670,106.966780 29.214020,106.966170 29.215360,106.964340 29.215970,106.962310 29.215440,106.962100 29.213320,106.961140 29.212140,106.959540 29.211080,106.958810 29.208630,106.958560 29.207090,106.957210 29.205390,106.956140 29.203120,106.954310 29.203110,106.953150 29.201700,106.953040 29.200320,106.951930 29.198400,106.951510 29.197030,106.953730 29.194800,106.955210 29.194080,106.957520 29.194940,106.957940 29.193160,106.957380 29.190310,106.955310 29.188800,106.955350 29.190180,106.953870 29.190780,106.950860 29.187670,106.948740 29.186730,106.946370 29.186280,106.944370 29.185330,106.944210 29.183770,106.942620 29.182390,106.941180 29.182150,106.939590 29.183540,106.936030 29.183160,106.929890 29.181250,106.927920 29.181150,106.926250 29.182260,106.923570 29.183770,106.922270 29.184090,106.919630 29.180230,106.917910 29.180300,106.915670 29.182420,106.914830 29.184230,106.913890 29.190240,106.911830 29.190250,106.910520 29.191640,106.910220 29.193910,106.911120 29.196010,106.910220 29.197420,106.906930 29.197400,106.906090 29.194370,106.903410 29.191550,106.902160 29.191040,106.900380 29.190660,106.898180 29.192180,106.895710 29.192520,106.894410 29.190410,106.894400 29.187020,106.894120 29.182650,106.894450 29.181190,106.896570 29.179420,106.898680 29.178740,106.900110 29.178420,106.902850 29.178080,106.905360 29.179230,106.907380 29.179260,106.906850 29.176770,106.908220 29.175400,106.908820 29.173380,106.908340 29.170870,106.905500 29.169500,106.905470 29.166570,106.906180 29.164320,106.907160 29.162010,106.908030 29.160490,106.905960 29.158690,106.904910 29.157800,106.901170 29.156520,106.898190 29.155550,106.897210 29.153180,106.896970 29.151840,106.894290 29.145890,106.893790 29.144640,106.891580 29.142750,106.891430 29.139960,106.892460 29.137350,106.890640 29.132760,106.890330 29.135000,106.889200 29.136830,106.888180 29.137650,106.886200 29.140270,106.884170 29.141030,106.882270 29.143220,106.866890 29.151390,106.865570 29.152720,106.863650 29.152780,106.861540 29.149310,106.859130 29.147730,106.857710 29.147910,106.856860 29.149000,106.856040 29.151890,106.855460 29.153260,106.852440 29.155910,106.850940 29.156720,106.848310 29.157420,106.846950 29.157480,106.844480 29.156280,106.842890 29.155080,106.841390 29.154240,106.836250 29.153560,106.831870 29.152720,106.828220 29.149730,106.825130 29.148850,106.823580 29.148780,106.821200 29.149100,106.818610 29.150670,106.817760 29.152240,106.816560 29.158850,106.816090 29.160540,106.814350 29.162080,106.811790 29.164960,106.811180 29.166150,106.810540 29.168250,106.809880 29.172490,106.810320 29.175520,106.809810 29.178490,106.808190 29.179940,106.803720 29.181170,106.798380 29.180880,106.796890 29.180100,106.795710 29.176890,106.796010 29.173110,106.795860 29.171240,106.793980 29.169740,106.792540 29.169650,106.790570 29.177190,106.787220 29.177130,106.785150 29.175490,106.784220 29.174570,106.780810 29.170550,106.778640 29.167870,106.776340 29.164290,106.772710 29.162870,106.769990 29.161600,106.768600 29.161180,106.766650 29.161820,106.765670 29.163220,106.765440 29.166020,106.766530 29.169510,106.765490 29.170860,106.762540 29.169670,106.758680 29.169610,106.756760 29.170090,106.754740 29.171930,106.755910 29.173620,106.753980 29.175070,106.749990 29.176590,106.748640 29.176860,106.745120 29.173970,106.741100 29.172210,106.736830 29.170680,106.736370 29.168620,106.733890 29.165060,106.732460 29.163960,106.730590 29.162800,106.728730 29.162390,106.727480 29.163090,106.725910 29.164490,106.723290 29.168010,106.716780 29.173180,106.716830 29.175230,106.713880 29.177170,106.712210 29.178720,106.707460 29.178820,106.701140 29.178560,106.701670 29.177060,106.699340 29.176580,106.697780 29.178000,106.697740 29.180130,106.694390 29.183260,106.685570 29.187990,106.684200 29.187390,106.682780 29.183050,106.681520 29.176960,106.680920 29.175710,106.679150 29.173480,106.675680 29.178440,106.674220 29.178080,106.673590 29.176920,106.672710 29.174340,106.670710 29.169500,106.669110 29.169420,106.667590 29.168740,106.666910 29.165920,106.667780 29.163990,106.668040 29.161750,106.666920 29.158920,106.663950 29.158380,106.661810 29.160370,106.658140 29.161320,106.656120 29.161190,106.654040 29.160400,106.652040 29.161040,106.655040 29.175310,106.652630 29.175790,106.651750 29.174820,106.648910 29.174150,106.644350 29.173850,106.642630 29.174120,106.634220 29.169320,106.632410 29.168470,106.629020 29.165990,106.625840 29.163570,106.624410 29.162300,106.622740 29.160070,106.622260 29.158900,106.621240 29.154670,106.620440 29.152640,106.614690 29.146690,106.614020 29.145480,106.616420 29.144000,106.617440 29.142990,106.616380 29.141160,106.614450 29.139940,106.612130 29.138770,106.611070 29.137940,106.610350 29.136710,106.609980 29.134110,106.610830 29.131440,106.607200 29.128720,106.603440 29.126850,106.601260 29.127210,106.599010 29.128790,106.597820 29.129280,106.596160 29.129260,106.592790 29.128560,106.591540 29.128120,106.589070 29.126950,106.587230 29.126480,106.585450 29.127520,106.584650 29.130210,106.582050 29.132120,106.573810 29.130380,106.571010 29.131000,106.565210 29.130940,106.562710 29.131620,106.561530 29.132140,106.559860 29.133160,106.558540 29.134200,106.556310 29.136490,106.553810 29.139910,106.552860 29.140910,106.550770 29.142760,106.549380 29.144370,106.548530 29.147670,106.548370 29.150220,106.548450 29.151510,106.548870 29.153420,106.550960 29.155880,106.552410 29.156520,106.555620 29.156960,106.557190 29.157350,106.559190 29.158630,106.561040 29.160830,106.561070 29.162390,106.558920 29.163550,106.556030 29.165420,106.555230 29.166450,106.554770 29.167750,106.554670 29.170510,106.554440 29.171830,106.552090 29.175550,106.550890 29.177010,106.544830 29.183200,106.542810 29.185760,106.541930 29.187110,106.540810 29.189240,106.540730 29.192300,106.541470 29.194050,106.543510 29.197460,106.544310 29.199230,106.546000 29.209850,106.546650 29.212490,106.545650 29.214180,106.544350 29.214300,106.541280 29.213320,106.538430 29.214160,106.537260 29.215070,106.536310 29.216060,106.535430 29.217370,106.536070 29.219660,106.535320 29.221490,106.533480 29.222460,106.531010 29.223080,106.526060 29.223920,106.524750 29.223900,106.522050 29.223550,106.519900 29.225200,106.518560 29.228770,106.518350 29.231820,106.515750 29.231710,106.514390 29.232900,106.515520 29.234830,106.515360 29.237740,106.514610 29.239000,106.514670 29.241710,106.515100 29.243560,106.516230 29.247090,106.516760 29.248250,106.518080 29.250240,106.518210 29.252390,106.516750 29.253540,106.513660 29.254000,106.511760 29.256530,106.503840 29.259630,106.501060 29.261430,106.500420 29.262550,106.500090 29.264660,106.501620 29.270690,106.505320 29.275580,106.507130 29.279890,106.507420 29.281270,106.503840 29.283340,106.496940 29.286370,106.495540 29.286620,106.491820 29.288010,106.490050 29.288950,106.488860 29.289770,106.486880 29.291820,106.485650 29.293440,106.487260 29.299730,106.488450 29.302310,106.486930 29.303910,106.483710 29.303950,106.482280 29.305240,106.481860 29.308160,106.480220 29.312670,106.479260 29.314870,106.478380 29.315780,106.475740 29.317130,106.474800 29.319360,106.476030 29.322710,106.476180 29.324400,106.474050 29.327820,106.473610 29.333140,106.472750 29.334780,106.472680 29.340040,106.473710 29.348950,106.476470 29.350390,106.477210 29.351760,106.476590 29.352980,106.473310 29.356870,106.476220 29.359320,106.476200 29.361230,106.474350 29.361970,106.472370 29.361710,106.471080 29.361510,106.469820 29.360940,106.468550 29.359750,106.465440 29.359210,106.461660 29.359850,106.459710 29.360760,106.456240 29.358230,106.455070 29.357050,106.452780 29.354690,106.450890 29.352980,106.448910 29.352030,106.444310 29.351370,106.440940 29.350400,106.439280 29.350080,106.437830 29.350280,106.434380 29.352880,106.436940 29.354580,106.439360 29.357020,106.440790 29.358850,106.442240 29.361670,106.444830 29.366210,106.445430 29.368420,106.448150 29.373090,106.449720 29.375160,106.456160 29.381730,106.459560 29.384030,106.461690 29.385110,106.464380 29.386800,106.468490 29.389090,106.471590 29.390290,106.476050 29.393440,106.479440 29.394630,106.483640 29.396540,106.490640 29.399240,106.493310 29.399700,106.499780 29.400350,106.503350 29.399990,106.508720 29.397930,106.520990 29.389700,106.522610 29.388860,106.524280 29.388360,106.527710 29.387300,106.529910 29.387060,106.531440 29.387390,106.532640 29.388430,106.534460 29.390960,106.533810 29.394370,106.533110 29.396110,106.531010 29.399600,106.527550 29.405830,106.503850 29.436620,106.500090 29.441850,106.499110 29.443640,106.498130 29.446490,106.497910 29.448280,106.497970 29.451850,106.498420 29.458350,106.499830 29.470000,106.501520 29.474920,106.503850 29.478480,106.505040 29.479700,106.506500 29.480710,106.508390 29.481700,106.510530 29.481840,106.511890 29.481910,106.513340 29.481800,106.515380 29.481430,106.525680 29.477950";//巴南
        var regionLngLats = [];
        var regionArr = points.split(",");
        for (var m = 0; m < regionArr.length; m++) {
          var lnglatArr = regionArr[m].split(" ");
          var lnglat = [Number(lnglatArr[0]), Number(lnglatArr[1])];
          regionLngLats.push(lnglat);
        }
        var coord4 = [
          regionLngLats
        ];
        for (var i = 0; i < coord4[0].length; i++) {
          coord3[0].push(coord4[0][i]);
        }
        //===
        // console.log([beisan]);
        // console.log(coord3);
        var polygon = new Polygon(coord3);
        // var polygon=new Polygon([beisan]);
        var line_f = new Feature(polygon);
        line_f.setStyle(linestyle);
        var extent = polygon.getExtent();
        var minx_maxy = new Point([extent[0], extent[3]]);
        var maxx_miny = new Point([extent[2], extent[1]]);
        console.log([extent[0], extent[3]]);
        console.log([extent[2], extent[1]]);
        var width = getDistance([extent[0], extent[3]], [extent[2], extent[3]], 6378137);
        var height = getDistance([extent[0], extent[1]], [extent[0], extent[3]], 6378137);
        var unit = a;
        var h = height % unit == 0 ? height / unit : height / unit + 1;
        var w = width % unit == 0 ? width / unit : width / unit + 1;
        for (var j = 0; j < h; j++) {
          for (var i = 0; i < w; i++) {
            // var coordinates = [minx_maxy.getCoordinates()[0]+i*unit*0.00001141,minx_maxy.getCoordinates()[1]-j*unit*0.00000899];
            var coordinates = [CommonFunc.caculate.destinationVincenty(minx_maxy.getCoordinates(), 90, i * unit)[0],
              CommonFunc.caculate.destinationVincenty(minx_maxy.getCoordinates(), 180, j * unit)[1]
            ];
            var rectangle = new Polygon([
              [coordinates, [CommonFunc.caculate.destinationVincenty(minx_maxy.getCoordinates(), 90, (i + 1) * unit)[
                  0], CommonFunc.caculate.destinationVincenty(minx_maxy.getCoordinates(), 180, j * unit)[1]],
                [CommonFunc.caculate.destinationVincenty(minx_maxy.getCoordinates(), 90, (i + 1) * unit)[0],
                  CommonFunc.caculate.destinationVincenty(minx_maxy.getCoordinates(), 180, (j + 1) * unit)[1]
                ],
                [CommonFunc.caculate.destinationVincenty(coordinates, 180, unit)[0], CommonFunc.caculate.destinationVincenty(
                  minx_maxy.getCoordinates(), 180, (j + 1) * unit)[1]], coordinates
              ]
            ]);
            var gridFeature = new Feature({
              type: 'grid',
              geometry: rectangle
            });
            gridFeature.setId('' + i + ',' + '' + j + '');
            // featuregrid.push(gridFeature);
            var x = turf.intersect(new GeoJSON().writeGeometryObject(rectangle), new GeoJSON().writeGeometryObject(
              polygon));
            if (x != null) {
              // console.log(x);
              // console.log(new GeoJSON().readFeature(x));
              var y = new GeoJSON().readFeature(x);
              y.setId('' + i + ',' + '' + j + '');
              y.setStyle(gridstyle);
              // console.log(gridFeature);
              geojson.push(x);
              featuregrid.push(y);
            }
          }
        }
        // featuregrid.push(line_f);
        console.log(featuregrid);
        // featuregrid[0].setStyle(onlystyle);
        // featuregrid[1].setStyle(onlystyle);
        // featuregrid[2].setStyle(onlystyle);
        // featuregrid[3].setStyle(onlystyle);
        // featuregrid[4].setStyle(onlystyle);
        // featuregrid[5].setStyle(onlystyle);
        // featuregrid[102].setStyle(onlystyle);
        // console.log(geojson);
        layer=new VectorLayer({
            source: new VectorSource({
              features: featuregrid,
              projection: 'EPSG:4326'
            }),
            style: function (feature) {
              return styles[feature.get('type')];
            }
          })
          map.addLayer(layer);
      }
    },
    watch: {

    }
  }

</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
  .grid_map {
    height: 100%;
    width: 100%;
  }

  #mouse-position {
    float: left;
    position: absolute;
    bottom: 5px;
    width: 200px;
    height: 20px;
    /* 将z-index设置为显示在地图上层 */
    z-index: 2000;
  }
  .dropdown{
    height: 4%;
    width: 5%;
    position: absolute;
    z-index: 2000;
    left: 5%;
    top: 1.5%;
  }
  .unit{
    position: absolute;
    z-index: 2000;
    left: 2.5%;
    top: 2%;
    font-size: 18px;
    font-weight: bold;
  }
</style>
<style>
  /* 显示鼠标信息的自定义样式设置 */

  .custom-mouse-position {
    color: red;
    font-size: 16px;
    font-family: "微软雅黑";
  }

  .ol-popup {
    position: absolute;
    background-color: white;
    -webkit-filter: drop-shadow(0 1px 4px rgba(0, 0, 0, 0.2));
    filter: drop-shadow(0 1px 4px rgba(0, 0, 0, 0.2));
    padding: 15px;
    border-radius: 10px;
    border: 1px solid #cccccc;
    bottom: 12px;
    left: -35px;
    min-width: 50px;
  }

  .ol-popup:after,
  .ol-popup:before {
    top: 100%;
    border: solid transparent;
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
  }

  .ol-popup:after {
    border-top-color: white;
    border-width: 10px;
    left: 50%;
    margin-left: -10px;
  }

  .ol-popup:before {
    border-top-color: #cccccc;
    border-width: 11px;
    left: 50%;
    margin-left: -11px;
  }

</style>
